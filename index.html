<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>内耗耐受度测试 (IFT)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #9c27b0;
            --primary-light: #ba68c8;
            --primary-dark: #7b1fa2;
            --secondary: #f44336;
            --accent: #e91e63;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --gray: #6c757d;
            --gray-light: #e9ecef;
            --purple: #9c27b0;
            --teal: #009688;
            --indigo: #3f51b5;
            --orange: #ff5722;
            --pink: #e91e63;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7ff;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .page {
            display: none;
            min-height: 100vh;
            padding: 40px 0;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* 页面切换动画 */
        .page-transition {
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* 顶部导航栏 */
        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 0;
            margin-bottom: 30px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .logo-icon {
            font-size: 2rem;
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo-subtitle {
            font-size: 0.8rem;
            font-weight: 400;
            color: var(--gray);
        }
        
        /* 首页样式 */
        .hero {
            text-align: center;
            padding: 80px 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 20px;
            margin-bottom: 60px;
            box-shadow: 0 10px 30px rgba(156, 39, 176, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: "";
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }
        
        .hero::after {
            content: "";
            position: absolute;
            bottom: -30%;
            left: -20%;
            width: 150px;
            height: 150px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
            position: relative;
            z-index: 2;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 30px;
            background-color: white;
            color: var(--primary);
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 2;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(0, 0, 0, 0.15);
        }
        
        .btn-primary {
            background-color: white;
            color: var(--primary);
        }
        
        /* 两栏布局 */
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin: 80px 0;
            align-items: center;
        }
        
        .column-content {
            padding: 20px;
        }
        
        .column-content h2 {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .column-content p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 20px;
            color: var(--dark);
        }
        
        .column-image {
            text-align: center;
        }
        
        .column-icon {
            font-size: 8rem;
            color: var(--primary);
            opacity: 0.8;
        }
        
        /* 测试流程展示 - 新版时间轴样式 */
        .process-section {
            margin: 80px 0;
            text-align: center;
        }
        
        .process-section h2 {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 40px;
        }
        
        .timeline {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .timeline::after {
            content: '';
            position: absolute;
            width: 6px;
            background-color: var(--primary-light);
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -3px;
            border-radius: 10px;
        }
        
        .timeline-item {
            padding: 10px 40px;
            position: relative;
            width: 50%;
            box-sizing: border-box;
        }
        
        .timeline-item:nth-child(odd) {
            left: 0;
        }
        
        .timeline-item:nth-child(even) {
            left: 50%;
        }
        
        .timeline-item::after {
            content: '';
            position: absolute;
            width: 25px;
            height: 25px;
            background-color: white;
            border: 4px solid var(--primary);
            top: 15px;
            border-radius: 50%;
            z-index: 1;
        }
        
        .timeline-item:nth-child(odd)::after {
            right: -13px;
        }
        
        .timeline-item:nth-child(even)::after {
            left: -13px;
        }
        
        .timeline-content {
            padding: 20px 30px;
            background-color: white;
            position: relative;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        
        .timeline-content:hover {
            transform: translateY(-5px);
        }
        
        .timeline-content h3 {
            margin-top: 0;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .timeline-content h3 i {
            font-size: 1.5rem;
        }
        
        .timeline-content p {
            margin: 10px 0 0;
            color: var(--gray);
        }
        
        /* 科学可靠的评估基础 - 新版卡片样式 */
        .science-section {
            margin: 80px 0;
            text-align: center;
        }
        
        .science-section h2 {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 40px;
        }
        
        .science-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }
        
        .science-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .science-card:hover {
            transform: translateY(-10px);
        }
        
        .science-card-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 25px 20px;
            text-align: center;
        }
        
        .science-card-icon {
            font-size: 2.8rem;
            margin-bottom: 15px;
        }
        
        .science-card-title {
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .science-card-body {
            padding: 25px 20px;
            flex-grow: 1;
            display: flex;
            align-items: center;
        }
        
        .science-card-description {
            color: var(--gray);
            line-height: 1.6;
        }
        
        /* 内耗类型介绍 */
        .types-section {
            margin: 80px 0;
            text-align: center;
        }
        
        .types-section h2 {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 40px;
        }
        
        .types-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
        }
        
        .type-card {
            background: white;
            padding: 25px 15px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
            transition: transform 0.3s ease;
            border-top: 4px solid var(--primary);
        }
        
        .type-card:hover {
            transform: translateY(-5px);
        }
        
        .type-icon {
            font-size: 2.2rem;
            margin-bottom: 15px;
        }
        
        .type-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .type-description {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        /* 底部CTA */
        .cta-section {
            margin: 80px 0 40px;
            text-align: center;
        }
        
        .cta-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 60px 40px;
            border-radius: 20px;
            color: white;
            box-shadow: 0 10px 30px rgba(156, 39, 176, 0.3);
        }
        
        .cta-card h2 {
            font-size: 2.2rem;
            margin-bottom: 20px;
        }
        
        .cta-card p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
        }
        
        /* 测试页样式 */
        .test-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .test-header h2 {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .progress-bar {
            height: 10px;
            background-color: var(--gray-light);
            border-radius: 5px;
            margin: 30px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--accent), var(--primary));
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .question-container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }
        
        .question-number {
            font-size: 1rem;
            color: var(--gray);
            margin-bottom: 10px;
        }
        
        .question-text {
            font-size: 1.4rem;
            margin-bottom: 30px;
            color: var(--dark);
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .option {
            padding: 15px 20px;
            background-color: var(--gray-light);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }
        
        .option:hover {
            background-color: var(--primary-light);
            color: white;
        }
        
        .option.selected {
            background-color: var(--primary);
            color: white;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        /* 结果页样式 */
        .result-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .result-header h2 {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        /* 模块1：核心得分与等级定位 - 优化版 */
        .score-summary {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(156, 39, 176, 0.1);
            margin-bottom: 50px;
            text-align: center;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(156, 39, 176, 0.1);
        }
        
        .score-display-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
            margin: 30px 0;
        }
        
        .score-circle {
            position: relative;
            width: 220px;
            height: 220px;
        }
        
        .score-circle-bg {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(var(--primary) 0%, var(--gray-light) 0%);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 0 10px rgba(156, 39, 176, 0.1), 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .score-circle-inner {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        .score-value {
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .score-max {
            font-size: 1rem;
            color: var(--gray);
        }
        
        .score-info {
            text-align: left;
            max-width: 400px;
        }
        
        .score-level {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .score-description {
            font-size: 1.1rem;
            line-height: 1.8;
        }
        
        /* 耐受度可视化 */
        .tolerance-visualization {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 50px;
            border: 1px solid rgba(156, 39, 176, 0.1);
        }
        
        .tolerance-visualization h3 {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .tolerance-visualization h3 i {
            margin-right: 10px;
        }
        
        .tolerance-bar {
            height: 20px;
            background-color: var(--gray-light);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .tolerance-fill {
            height: 100%;
            border-radius: 10px;
            background: linear-gradient(to right, var(--primary-light), var(--primary));
            width: 0%;
            transition: width 1s ease;
            position: relative;
            box-shadow: 0 0 10px rgba(156, 39, 176, 0.3);
        }
        
        .tolerance-fill::after {
            content: "";
            position: absolute;
            top: 0;
            right: 0;
            width: 20px;
            height: 20px;
            background: var(--primary-dark);
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .tolerance-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .tolerance-label {
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 500;
        }
        
        .tolerance-description {
            margin-top: 20px;
            padding: 15px;
            background: rgba(156, 39, 176, 0.05);
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }
        
        /* 图表容器 - 优化版 */
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 50px;
        }
        
        .chart-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(156, 39, 176, 0.1);
        }
        
        .chart-card h3 {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .chart-card h3 i {
            margin-right: 10px;
        }
        
        /* 维度得分进度条 */
        .dimension-progress {
            margin-bottom: 20px;
        }
        
        .dimension-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .dimension-name {
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .dimension-score {
            font-weight: 600;
            color: var(--primary);
        }
        
        .progress-container {
            height: 12px;
            background-color: var(--gray-light);
            border-radius: 6px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 0.8s ease;
            background: linear-gradient(to right, var(--primary-light), var(--primary));
        }
        
        .dimension-description {
            font-size: 0.9rem;
            color: var(--gray);
            margin-top: 5px;
        }
        
        /* 模块2：人格类型匹配解析 - 优化版 */
        .personality-analysis {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 50px;
            border: 1px solid rgba(156, 39, 176, 0.1);
        }
        
        .personality-analysis h3 {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .personality-analysis h3 i {
            margin-right: 10px;
        }
        
        .personality-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .personality-card {
            background: linear-gradient(135deg, #f8f9ff, #f0f2ff);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid var(--primary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
        }
        
        .personality-card:hover {
            transform: translateY(-5px);
        }
        
        .personality-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .personality-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 1.5rem;
        }
        
        .personality-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .personality-description {
            color: var(--dark);
            margin-bottom: 15px;
        }
        
        .personality-cause {
            padding: 15px;
            background: rgba(156, 39, 176, 0.05);
            border-radius: 10px;
            font-size: 0.95rem;
            color: var(--gray);
            margin-bottom: 15px;
        }
        
        .personality-tips {
            background: rgba(244, 67, 54, 0.05);
            padding: 15px;
            border-radius: 10px;
            border-left: 3px solid var(--secondary);
        }
        
        .personality-tips h4 {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        .personality-tips h4 i {
            margin-right: 8px;
        }
        
        .personality-tips ul {
            padding-left: 20px;
        }
        
        .personality-tips li {
            margin-bottom: 8px;
            color: var(--dark);
        }
        
        /* 模块3：内耗行为模式拆解 - 优化版 */
        .behavior-pattern {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 50px;
            border: 1px solid rgba(156, 39, 176, 0.1);
        }
        
        .behavior-pattern h3 {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .behavior-pattern h3 i {
            margin-right: 10px;
        }
        
        .behavior-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .behavior-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-top: 4px solid var(--primary);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .behavior-card:hover {
            transform: translateY(-5px);
        }
        
        .behavior-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .behavior-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 1.5rem;
        }
        
        .behavior-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .behavior-content {
            color: var(--dark);
            margin-bottom: 15px;
        }
        
        .behavior-visual {
            display: flex;
            align-items: center;
            margin-top: 15px;
            gap: 10px;
        }
        
        .behavior-emoji {
            font-size: 1.8rem;
        }
        
        .behavior-intensity {
            flex-grow: 1;
            height: 8px;
            background: var(--gray-light);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .behavior-intensity-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-light), var(--primary));
            border-radius: 4px;
        }
        
        /* 模块4：内耗优势挖掘 - 优化版（使用环形图） */
        .strength-analysis {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 50px;
            border: 1px solid rgba(156, 39, 176, 0.1);
        }
        
        .strength-analysis h3 {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .strength-analysis h3 i {
            margin-right: 10px;
        }
        
        .strength-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .strength-card {
            background: linear-gradient(135deg, #f8f9ff, #f0f2ff);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid var(--primary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
            text-align: center;
        }
        
        .strength-card:hover {
            transform: translateY(-5px);
        }
        
        .strength-header {
            margin-bottom: 15px;
        }
        
        .strength-icon {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: white;
            font-size: 1.8rem;
        }
        
        .strength-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .strength-description {
            color: var(--dark);
            margin-bottom: 20px;
        }
        
        .strength-visual {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
        }
        
        .strength-chart {
            width: 100%;
            height: 100%;
        }
        
        .strength-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .strength-careers {
            padding: 15px;
            background: rgba(156, 39, 176, 0.05);
            border-radius: 10px;
        }
        
        .strength-careers h4 {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            color: var(--primary);
            justify-content: center;
        }
        
        .strength-careers h4 i {
            margin-right: 8px;
        }
        
        .strength-careers ul {
            padding-left: 20px;
            text-align: left;
        }
        
        .strength-careers li {
            margin-bottom: 8px;
            color: var(--dark);
        }
        
        /* 模块5：多维度改善方案 - 优化版 */
        .improvement-plan {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 50px;
            border: 1px solid rgba(156, 39, 176, 0.1);
        }
        
        .improvement-plan h3 {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .improvement-plan h3 i {
            margin-right: 10px;
        }
        
        .improvement-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .improvement-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border-top: 4px solid var(--primary);
            transition: transform 0.3s ease;
        }
        
        .improvement-card:hover {
            transform: translateY(-5px);
        }
        
        .improvement-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .improvement-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 1.5rem;
        }
        
        .improvement-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .improvement-tips {
            list-style-type: none;
        }
        
        .improvement-tip {
            padding: 10px 0;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            align-items: flex-start;
        }
        
        .improvement-tip:last-child {
            border-bottom: none;
        }
        
        .tip-icon {
            color: var(--primary);
            margin-right: 10px;
            margin-top: 3px;
            flex-shrink: 0;
        }
        
        .tip-text {
            color: var(--dark);
        }
        
        /* 模块6：深度延伸分析 - 优化版 */
        .deep-analysis {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 50px;
            border: 1px solid rgba(156, 39, 176, 0.1);
        }
        
        .deep-analysis h3 {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .deep-analysis h3 i {
            margin-right: 10px;
        }
        
        .analysis-tabs {
            display: flex;
            border-bottom: 1px solid var(--gray-light);
            margin-bottom: 20px;
        }
        
        .analysis-tab {
            padding: 12px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .analysis-tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
            font-weight: 600;
        }
        
        .analysis-content {
            display: none;
        }
        
        .analysis-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .analysis-card {
            background: linear-gradient(135deg, #f8f9ff, #f0f2ff);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
        }
        
        .analysis-card:hover {
            transform: translateY(-5px);
        }
        
        .analysis-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .analysis-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 1.5rem;
        }
        
        .analysis-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .analysis-text {
            color: var(--dark);
            line-height: 1.7;
        }
        
        /* 非诊断声明 */
        .disclaimer {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 40px;
            border: 1px solid rgba(156, 39, 176, 0.1);
            text-align: center;
        }
        
        .disclaimer h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .disclaimer p {
            color: var(--gray);
            margin-bottom: 10px;
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }
        
        /* 新样式：优化后的模块 */
        
        /* 什么是内耗与内耗耐受度 - 新版设计 */
        .concept-section {
            background: white;
            padding: 60px 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(156, 39, 176, 0.1);
            margin: 80px 0;
            position: relative;
            overflow: hidden;
        }
        
        .concept-section::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }
        
        .concept-header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .concept-header h2 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .concept-header p {
            font-size: 1.2rem;
            color: var(--gray);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .concept-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }
        
        .concept-card {
            background: linear-gradient(135deg, #f8f9ff, #f0f2ff);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .concept-card:hover {
            transform: translateY(-5px);
        }
        
        .concept-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }
        
        .concept-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .concept-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .concept-description {
            color: var(--dark);
            line-height: 1.7;
        }
        
        /* 内耗对生活的影响 - 新版设计 */
        .impact-section {
            margin: 80px 0;
        }
        
        .impact-header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .impact-header h2 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .impact-header p {
            font-size: 1.2rem;
            color: var(--gray);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .impact-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }
        
        .impact-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .impact-card:hover {
            transform: translateY(-10px);
        }
        
        .impact-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }
        
        .impact-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(156, 39, 176, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: var(--primary);
            font-size: 2.5rem;
        }
        
        .impact-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .impact-description {
            color: var(--dark);
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .impact-list {
            text-align: left;
            margin-top: 20px;
        }
        
        .impact-list li {
            padding: 8px 0;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            align-items: flex-start;
        }
        
        .impact-list li:last-child {
            border-bottom: none;
        }
        
        .impact-list-icon {
            color: var(--primary);
            margin-right: 10px;
            margin-top: 3px;
            flex-shrink: 0;
        }
        
        /* 科学可靠的评估基础 - 新版设计 */
        .evaluation-section {
            margin: 80px 0;
        }
        
        .evaluation-header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .evaluation-header h2 {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .evaluation-header p {
            font-size: 1.2rem;
            color: var(--gray);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .evaluation-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
        }
        
        .evaluation-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .evaluation-card:hover {
            transform: translateY(-5px);
        }
        
        .evaluation-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
        }
        
        .evaluation-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .evaluation-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .evaluation-description {
            color: var(--dark);
            line-height: 1.6;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .question-container {
                padding: 20px;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .charts-container {
                grid-template-columns: 1fr;
            }
            
            .score-display-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .personality-cards {
                grid-template-columns: 1fr;
            }
            
            .behavior-grid {
                grid-template-columns: 1fr;
            }
            
            .strength-cards {
                grid-template-columns: 1fr;
            }
            
            .improvement-cards {
                grid-template-columns: 1fr;
            }
            
            .analysis-grid {
                grid-template-columns: 1fr;
            }
            
            .process-cards {
                flex-direction: column;
            }
            
            .types-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .science-cards {
                grid-template-columns: 1fr;
            }
            
            .two-column {
                grid-template-columns: 1fr;
            }
            
            .enhanced-content {
                grid-template-columns: 1fr;
            }
            
            /* 时间轴响应式 */
            .timeline::after {
                left: 31px;
            }
            
            .timeline-item {
                width: 100%;
                padding-left: 70px;
                padding-right: 25px;
            }
            
            .timeline-item:nth-child(even) {
                left: 0;
            }
            
            .timeline-item::after {
                left: 18px;
            }
            
            .timeline-item:nth-child(odd)::after {
                right: auto;
            }
            
            /* 新版模块响应式 */
            .concept-grid {
                grid-template-columns: 1fr;
            }
            
            .impact-grid {
                grid-template-columns: 1fr;
            }
            
            .evaluation-cards {
                grid-template-columns: 1fr;
            }
        }

        /* 兑换码弹窗样式 */
        .code-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .code-modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            text-align: center;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }

        .modal-close:hover {
            color: var(--primary);
        }

        .modal-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .modal-description {
            color: var(--gray);
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .code-input {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--gray-light);
            border-radius: 10px;
            font-size: 1.1rem;
            margin-bottom: 20px;
            text-align: center;
            transition: border-color 0.3s ease;
        }

        .code-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .code-error {
            color: var(--danger);
            margin-bottom: 15px;
            min-height: 20px;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .btn-secondary {
            background-color: var(--gray-light);
            color: var(--dark);
        }

        .btn-secondary:hover {
            background-color: #d1d5db;
        }
    </style>
</head>
<body>
    <!-- 兑换码弹窗 -->
    <div id="code-modal" class="code-modal">
        <div class="modal-content">
            <div class="modal-close" id="modal-close">&times;</div>
            <div class="modal-icon">
                <i class="fas fa-key"></i>
            </div>
            <h2 class="modal-title">请输入兑换码</h2>
            <p class="modal-description">您需要有效的兑换码才能进行心理测评测试。请输入您在小红书购买的兑换码。</p>
            
            <input type="text" id="code-input" class="code-input" placeholder="输入兑换码（如：PSYCH001）">
            <div id="code-error" class="code-error"></div>
            
            <div class="modal-buttons">
                <button id="cancel-btn" class="btn btn-secondary">取消</button>
                <button id="confirm-btn" class="btn btn-primary">确认</button>
            </div>
            
            <div style="margin-top: 25px; padding-top: 20px; border-top: 1px solid var(--gray-light);">
                <p style="font-size: 0.9rem; color: var(--gray);">
                    <i class="fas fa-info-circle"></i> 提示：每个兑换码仅限使用一次，验证成功后24小时内可无限次访问
                </p>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- 顶部导航栏 -->
        <div class="navbar">
            <div class="logo">
                <i class="fas fa-brain logo-icon"></i>
                <div class="logo-text">
                    <span>内耗耐受度测试</span>
                    <span class="logo-subtitle">Inner Fatigue Tolerance (IFT)</span>
                </div>
            </div>
        </div>
        
        <!-- 首页 -->
        <div id="home-page" class="page active">
            <div class="hero">
                <h1><i class="fas fa-brain"></i> 内耗耐受度测试 (IFT)</h1>
                <p>通过42道精心设计的题目，全面评估您的内耗耐受能力，了解自己在压力下的心理状态，并获得个性化的改善建议。</p>
                <button id="start-test" class="btn btn-primary">开始测试 <i class="fas fa-play-circle"></i></button>
            </div>
            
            <!-- 测试流程展示 - 时间轴样式 -->
            <div class="process-section">
                <h2>测试流程</h2>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3><i class="fas fa-user-check"></i> 开始测试</h3>
                            <p>点击开始按钮，进入测试页面</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3><i class="fas fa-question-circle"></i> 回答问题</h3>
                            <p>完成42道心理学题目，评估内耗状况</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3><i class="fas fa-chart-bar"></i> 获取报告</h3>
                            <p>获得详细的内耗分析报告和耐受度评估</p>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-content">
                            <h3><i class="fas fa-lightbulb"></i> 改善建议</h3>
                            <p>根据测试结果获得个性化改善方案</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 什么是内耗与内耗耐受度 - 新版设计 -->
            <div class="concept-section">
                <div class="concept-header">
                    <h2>什么是内耗与内耗耐受度</h2>
                    <p>深入理解内耗现象及其对生活质量的影响</p>
                </div>
                <div class="concept-grid">
                    <div class="concept-card">
                        <div class="concept-icon">🧠</div>
                        <div class="concept-title">内耗</div>
                        <div class="concept-description">
                            <p>内耗是指个体在心理层面无谓消耗精力的现象，主要表现为过度思考、自我怀疑、情绪纠结等心理活动。</p>
                            <p>这些活动并不产生实际价值，却持续消耗个体的心理能量，导致效率下降、情绪疲惫和生活质量降低。</p>
                            <p>内耗通常表现为决策困难、情绪反刍、关系敏感、行动拖延和自我否定等多种形式。</p>
                        </div>
                    </div>
                    <div class="concept-card">
                        <div class="concept-icon">💪</div>
                        <div class="concept-title">内耗耐受度</div>
                        <div class="concept-description">
                            <p>内耗耐受度是指个体在面对内耗时的应对能力和恢复能力。</p>
                            <p>高内耗耐受度的个体能够快速识别并中止无效的心理消耗，将精力集中于有价值的事务上；而低内耗耐受度的个体则容易陷入内耗循环，难以自拔。</p>
                            <p>提高内耗耐受度可以帮助您更有效地管理心理资源，减少无效消耗，提升生活质量和幸福感。</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 内耗类型介绍 -->
            <div class="types-section">
                <h2>认识内耗的5种类型</h2>
                <div class="types-grid">
                    <div class="type-card">
                        <div class="type-icon">🤔</div>
                        <div class="type-title">决策内耗</div>
                        <div class="type-description">面对选择时反复纠结，担心做出错误决定</div>
                    </div>
                    <div class="type-card">
                        <div class="type-icon">😥</div>
                        <div class="type-title">情绪内耗</div>
                        <div class="type-description">陷入负面情绪无法自拔，过度解读他人言行</div>
                    </div>
                    <div class="type-card">
                        <div class="type-icon">👥</div>
                        <div class="type-title">关系内耗</div>
                        <div class="type-description">过度在意他人评价，难以拒绝他人请求</div>
                    </div>
                    <div class="type-card">
                        <div class="type-icon">⏳</div>
                        <div class="type-title">行动内耗</div>
                        <div class="type-description">追求完美导致拖延，反复修改方案</div>
                    </div>
                    <div class="type-card">
                        <div class="type-icon">🧠</div>
                        <div class="type-title">自我认知内耗</div>
                        <div class="type-description">自我价值感低，常与他人比较</div>
                    </div>
                </div>
            </div>
            
            <!-- 科学可靠的评估基础 - 新版设计 -->
            <div class="evaluation-section">
                <div class="evaluation-header">
                    <h2>科学可靠的评估基础</h2>
                    <p>基于严谨的心理学理论和专业评估方法</p>
                </div>
                <div class="evaluation-cards">
                    <div class="evaluation-card">
                        <div class="evaluation-icon"><i class="fas fa-flask"></i></div>
                        <div class="evaluation-title">心理学理论基础</div>
                        <div class="evaluation-description">
                            基于认知行为理论、情绪调节理论和自我损耗理论等现代心理学框架构建评估模型，确保评估的科学性和有效性。
                        </div>
                    </div>
                    <div class="evaluation-card">
                        <div class="evaluation-icon"><i class="fas fa-clipboard-check"></i></div>
                        <div class="evaluation-title">专业题目设计</div>
                        <div class="evaluation-description">
                            42道题目经过心理学专家精心设计，确保评估的全面性和准确性，涵盖内耗的各个维度。
                        </div>
                    </div>
                    <div class="evaluation-card">
                        <div class="evaluation-icon"><i class="fas fa-chart-pie"></i></div>
                        <div class="evaluation-title">多维度分析</div>
                        <div class="evaluation-description">
                            从决策、情绪、关系、行动和自我认知五个维度全面评估内耗模式，提供精准的分析结果。
                        </div>
                    </div>
                    <div class="evaluation-card">
                        <div class="evaluation-icon"><i class="fas fa-user-shield"></i></div>
                        <div class="evaluation-title">隐私保护</div>
                        <div class="evaluation-description">
                            严格保护用户隐私，测试数据仅用于分析，不会对外公开或用于商业用途，确保信息安全。
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 内耗对生活的影响 - 新版设计 -->
            <div class="impact-section">
                <div class="impact-header">
                    <h2>内耗对生活的影响</h2>
                    <p>了解内耗如何影响您的日常生活和长期发展</p>
                </div>
                <div class="impact-grid">
                    <div class="impact-card">
                        <div class="impact-icon">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div class="impact-title">工作效率下降</div>
                        <div class="impact-description">
                            决策困难和完美主义导致任务拖延，影响工作表现和职业发展。
                        </div>
                        <ul class="impact-list">
                            <li>
                                <div class="impact-list-icon"><i class="fas fa-check"></i></div>
                                <div>注意力分散，难以专注于重要任务</div>
                            </li>
                            <li>
                                <div class="impact-list-icon"><i class="fas fa-check"></i></div>
                                <div>决策能力下降，难以做出明确选择</div>
                            </li>
                            <li>
                                <div class="impact-list-icon"><i class="fas fa-check"></i></div>
                                <div>任务启动困难，经常拖延</div>
                            </li>
                        </ul>
                    </div>
                    <div class="impact-card">
                        <div class="impact-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="impact-title">人际关系紧张</div>
                        <div class="impact-description">
                            过度敏感和讨好行为导致关系不平衡，增加社交压力。
                        </div>
                        <ul class="impact-list">
                            <li>
                                <div class="impact-list-icon"><i class="fas fa-check"></i></div>
                                <div>过度解读他人言行，导致误解</div>
                            </li>
                            <li>
                                <div class="impact-list-icon"><i class="fas fa-check"></i></div>
                                <div>难以拒绝他人请求，牺牲自我</div>
                            </li>
                            <li>
                                <div class="impact-list-icon"><i class="fas fa-check"></i></div>
                                <div>社交焦虑，避免人际互动</div>
                            </li>
                        </ul>
                    </div>
                    <div class="impact-card">
                        <div class="impact-icon">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <div class="impact-title">心理健康受损</div>
                        <div class="impact-description">
                            持续的自我怀疑和负面情绪可能导致焦虑、抑郁等心理问题。
                        </div>
                        <ul class="impact-list">
                            <li>
                                <div class="impact-list-icon"><i class="fas fa-check"></i></div>
                                <div>情绪波动大，容易感到疲惫</div>
                            </li>
                            <li>
                                <div class="impact-list-icon"><i class="fas fa-check"></i></div>
                                <div>自我价值感低，经常自责</div>
                            </li>
                            <li>
                                <div class="impact-list-icon"><i class="fas fa-check"></i></div>
                                <div>应对压力能力下降</div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- 底部CTA -->
            <div class="cta-section">
                <div class="cta-card">
                    <h2>开始了解您的内耗模式</h2>
                    <p>只需15分钟，获得对您内耗模式的深度洞察和个性化改善方案</p>
                    <button id="start-test-bottom" class="btn btn-primary">立即测试 <i class="fas fa-play-circle"></i></button>
                </div>
            </div>
        </div>
        
        <!-- 测试页 -->
        <div id="test-page" class="page">
            <div class="test-header">
                <h2><i class="fas fa-pencil-alt"></i> 内耗耐受度测试</h2>
                <p>请根据您的实际情况选择最符合的选项</p>
            </div>
            
            <div class="progress-bar">
                <div class="progress" id="test-progress"></div>
            </div>
            
            <div class="question-container">
                <div class="question-number" id="question-number">题目 1/42</div>
                <div class="question-text" id="question-text">这里显示题目内容</div>
                
                <div class="options" id="options-container">
                    <!-- 选项将通过JavaScript动态生成 -->
                </div>
                
                <div class="nav-buttons">
                    <button id="prev-btn" class="btn" disabled><i class="fas fa-arrow-left"></i> 上一题</button>
                    <button id="next-btn" class="btn btn-primary">下一题 <i class="fas fa-arrow-right"></i></button>
                </div>
            </div>
        </div>
        
        <!-- 结果页 -->
        <div id="result-page" class="page">
            <div class="result-header">
                <h2><i class="fas fa-chart-bar"></i> 测试结果分析</h2>
                <p>以下是您的内耗耐受度测试结果及详细分析</p>
            </div>
            
            <!-- 模块1：核心得分与等级定位 - 优化版 -->
            <div class="score-summary">
                <div class="score-display-container">
                    <div class="score-circle">
                        <div class="score-circle-bg" id="score-circle-bg">
                            <div class="score-circle-inner">
                                <div class="score-value" id="total-score">0</div>
                                <div class="score-max">/100</div>
                            </div>
                        </div>
                    </div>
                    <div class="score-info">
                        <div class="score-level" id="score-level">
                            <i class="fas fa-medal"></i> 内耗耐受度等级
                        </div>
                        <div class="score-description" id="score-description">
                            这里将显示对您内耗耐受度的总体描述和分析。
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 耐受度可视化 -->
            <div class="tolerance-visualization">
                <h3><i class="fas fa-tachometer-alt"></i> 内耗耐受度可视化</h3>
                <div class="tolerance-bar">
                    <div class="tolerance-fill" id="tolerance-fill"></div>
                </div>
                <div class="tolerance-labels">
                    <div class="tolerance-label">极低耐受度</div>
                    <div class="tolerance-label">低耐受度</div>
                    <div class="tolerance-label">中等耐受度</div>
                    <div class="tolerance-label">高耐受度</div>
                    <div class="tolerance-label">极高耐受度</div>
                </div>
                <div class="tolerance-description" id="tolerance-description">
                    这里将根据您的得分显示耐受度描述。
                </div>
            </div>
            
            <!-- 各维度得分对比 - 进度条方式 -->
            <div class="chart-card">
                <h3><i class="fas fa-chart-bar"></i> 各维度得分对比</h3>
                <div id="dimension-progress-container">
                    <!-- 维度进度条将通过JavaScript动态生成 -->
                </div>
            </div>
            
            <!-- 增加间隙 -->
            <div style="margin-bottom: 30px;"></div>
            
            <!-- 模块2：人格类型匹配解析 - 优化版 -->
            <div class="personality-analysis">
                <h3><i class="fas fa-user-tag"></i> 人格类型匹配解析</h3>
                <div class="personality-cards" id="personality-cards-container">
                    <!-- 人格卡片将通过JavaScript动态生成 -->
                </div>
            </div>
            
            <!-- 图表容器 -->
            <div class="charts-container">
                <div class="chart-card">
                    <h3><i class="fas fa-chart-radar"></i> 五大维度内耗强度分析</h3>
                    <canvas id="radar-chart"></canvas>
                    <div id="dimension-analysis" style="margin-top: 15px; font-size: 0.9rem; color: var(--gray);"></div>
                </div>
                <div class="chart-card">
                    <h3><i class="fas fa-project-diagram"></i> 内耗行为模式拆解</h3>
                    <div class="behavior-grid" id="behavior-grid-container">
                        <!-- 行为模式卡片将通过JavaScript动态生成 -->
                    </div>
                </div>
            </div>
            
            <!-- 模块3：内耗优势挖掘 - 优化版（使用环形图） -->
            <div class="strength-analysis">
                <h3><i class="fas fa-seedling"></i> 内耗优势挖掘</h3>
                <div class="strength-cards" id="strength-cards-container">
                    <!-- 优势挖掘卡片将通过JavaScript动态生成 -->
                </div>
            </div>
            
            <!-- 模块4：多维度改善方案 - 优化版 -->
            <div class="improvement-plan">
                <h3><i class="fas fa-tools"></i> 多维度改善方案</h3>
                <div class="improvement-cards" id="improvement-cards-container">
                    <!-- 改善方案卡片将通过JavaScript动态生成 -->
                </div>
            </div>
            
            <!-- 模块5：深度延伸分析 - 优化版 -->
            <div class="deep-analysis">
                <h3><i class="fas fa-search"></i> 深度延伸分析</h3>
                <div class="analysis-tabs">
                    <div class="analysis-tab active" data-tab="family">原生家庭关联</div>
                    <div class="analysis-tab" data-tab="career">职业适配度</div>
                    <div class="analysis-tab" data-tab="relationship">亲密关系建议</div>
                </div>
                
                <div class="analysis-content active" id="family-content">
                    <div class="analysis-grid">
                        <div class="analysis-card">
                            <div class="analysis-header">
                                <div class="analysis-icon">
                                    <i class="fas fa-home"></i>
                                </div>
                                <div class="analysis-title">原生家庭关联度分析</div>
                            </div>
                            <div class="analysis-text" id="family-analysis">
                                这里将显示原生家庭对您内耗模式的影响分析。
                            </div>
                        </div>
                        <div class="analysis-card">
                            <div class="analysis-header">
                                <div class="analysis-icon">
                                    <i class="fas fa-lightbulb"></i>
                                </div>
                                <div class="analysis-title">改善建议</div>
                            </div>
                            <div class="analysis-text" id="family-suggestion">
                                这里将提供针对原生家庭影响的改善建议。
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="analysis-content" id="career-content">
                    <div class="analysis-grid">
                        <div class="analysis-card">
                            <div class="analysis-header">
                                <div class="analysis-icon">
                                    <i class="fas fa-briefcase"></i>
                                </div>
                                <div class="analysis-title">职业适配度建议</div>
                            </div>
                            <div class="analysis-text" id="career-analysis">
                                这里将显示您的内耗模式对职业发展的影响分析。
                            </div>
                        </div>
                        <div class="analysis-card">
                            <div class="analysis-header">
                                <div class="analysis-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="analysis-title">职场避坑指南</div>
                            </div>
                            <div class="analysis-text" id="career-warning">
                                这里将提供针对职业发展的避坑建议。
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="analysis-content" id="relationship-content">
                    <div class="analysis-grid">
                        <div class="analysis-card">
                            <div class="analysis-header">
                                <div class="analysis-icon">
                                    <i class="fas fa-heart"></i>
                                </div>
                                <div class="analysis-title">亲密关系相处建议</div>
                            </div>
                            <div class="analysis-text" id="relationship-analysis">
                                这里将显示您的内耗模式对亲密关系的影响分析。
                            </div>
                        </div>
                        <div class="analysis-card">
                            <div class="analysis-header">
                                <div class="analysis-icon">
                                    <i class="fas fa-comments"></i>
                                </div>
                                <div class="analysis-title">沟通技巧</div>
                            </div>
                            <div class="analysis-text" id="relationship-communication">
                                这里将提供针对亲密关系的沟通技巧。
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 非诊断声明 -->
            <div class="disclaimer">
                <h3><i class="fas fa-exclamation-triangle"></i> 重要声明</h3>
                <p>本测试结果仅供参考，不具备临床诊断价值。</p>
                <p>如果您感到严重情绪困扰或心理问题，请寻求专业心理咨询师的帮助。</p>
                <p>测试结果基于您提供的信息生成，不代表绝对的心理状态评估。</p>
            </div>
            
            <div class="action-buttons">
                <button id="retake-test" class="btn btn-primary">重新测试 <i class="fas fa-redo"></i></button>
                <button id="back-home" class="btn">返回首页 <i class="fas fa-home"></i></button>
            </div>
        </div>
    </div>

    <script>
    // 兑换码验证系统 - 后端验证版本
const validCodes = {}; // 不再使用前端验证

// 检查是否已经验证过兑换码
async function checkAccess() {
    const savedToken = localStorage.getItem('psych_access_token');
    const savedTime = localStorage.getItem('psych_access_time');
    
    if (savedToken && savedTime) {
        // 检查是否在24小时内
        const currentTime = new Date().getTime();
        const accessTime = parseInt(savedTime);
        
        if (currentTime - accessTime < 24 * 60 * 60 * 1000) { // 24小时
            // 可以添加后端令牌验证
            return true;
        } else {
            // 令牌过期，清除
            localStorage.removeItem('psych_access_token');
            localStorage.removeItem('psych_access_time');
        }
    }
    return false;
}

// 验证兑换码 - 调用后端API
async function validateCode(inputCode) {
    const errorElement = document.getElementById('code-error');
    
    if (!inputCode) {
        errorElement.textContent = "请输入兑换码";
        return false;
    }
    
    errorElement.textContent = "验证中...";
    
    try {
        const response = await fetch('/.netlify/functions/validate-code', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ code: inputCode })
        });
        
        const result = await response.json();
        
        if (result.success) {
            // 保存访问令牌和时间
            localStorage.setItem('psych_access_token', result.token);
            localStorage.setItem('psych_access_time', new Date().getTime().toString());
            
            // 关闭弹窗
            document.getElementById('code-modal').classList.remove('active');
            
            // 开始测试
            startTest();
            
            return true;
        } else {
            errorElement.textContent = result.message;
            return false;
        }
    } catch (error) {
        errorElement.textContent = "网络错误，请重试";
        return false;
    }
}
        // 显示兑换码弹窗
        function showCodeModal() {
            document.getElementById('code-modal').classList.add('active');
            document.getElementById('code-input').value = '';
            document.getElementById('code-error').textContent = '';
            document.getElementById('code-input').focus();
        }

        // 按照优化要求重新设计的题目
        const questions = [
            // 决策内耗维度（10题）
            { id: 1, text: "面对2-3个各有优劣的选项，我经常会反复对比超过1小时", category: "decision" },
            { id: 2, text: "做出选择后，我常常会设想'选另一个会不会更好'", category: "decision" },
            { id: 3, text: "为避免选错，我常常过度收集信息导致迟迟不行动", category: "decision" },
            { id: 4, text: "即使是小决定，我也需要很长时间才能做出选择", category: "decision" },
            { id: 5, text: "我常常因为担心做出错误决定而推迟决策", category: "decision" },
            { id: 6, text: "做出决定后，我常常会反复质疑自己的选择", category: "decision" },
            { id: 7, text: "我喜欢追求'最优解'，为此愿意花费大量时间", category: "decision" },
            { id: 8, text: "面对多个选项时，我常常感到不知所措", category: "decision" },
            { id: 9, text: "我常常因为担心错过更好选择而难以决定", category: "decision" },
            { id: 10, text: "即使已经做出决定，我仍会不断思考其他可能性", category: "decision" },
            
            // 情绪内耗维度（10题）
            { id: 11, text: "他人一句模糊的评价，我会在脑海中反复琢磨超过24小时", category: "emotion" },
            { id: 12, text: "遇到挫折后，我会持续自责'如果当时再努力点'而非总结经验", category: "emotion" },
            { id: 13, text: "独处时，我容易陷入对过去遗憾或未来担忧的情绪中无法自拔", category: "emotion" },
            { id: 14, text: "我常常因为小事而情绪低落，且这种状态会持续很久", category: "emotion" },
            { id: 15, text: "我容易过度解读他人的言行，并因此产生负面情绪", category: "emotion" },
            { id: 16, text: "我常常陷入'情绪反刍'，反复思考已经发生的不愉快事情", category: "emotion" },
            { id: 17, text: "我对批评特别敏感，即使是无意的批评也会让我难受很久", category: "emotion" },
            { id: 18, text: "我常常因为担心未来可能发生的事情而感到焦虑", category: "emotion" },
            { id: 19, text: "即使事情已经过去很久，我仍会为当时的失误感到懊悔", category: "emotion" },
            { id: 20, text: "我容易陷入消极情绪，且很难从中摆脱出来", category: "emotion" },
            
            // 关系内耗维度（8题）
            { id: 21, text: "为迎合他人，我常常勉强自己做不喜欢的事，事后却暗自纠结", category: "relationship" },
            { id: 22, text: "与他人产生分歧后，我会反复回想'是不是自己太苛刻'", category: "relationship" },
            { id: 23, text: "发消息后对方未及时回复，我会猜测'是不是自己说错话了'", category: "relationship" },
            { id: 24, text: "我常常担心自己的言行会让他人不高兴", category: "relationship" },
            { id: 25, text: "我很难拒绝别人的请求，即使这会让我感到不舒服", category: "relationship" },
            { id: 26, text: "我常常为了维持和谐关系而牺牲自己的利益", category: "relationship" },
            { id: 27, text: "我过度在意他人对我的看法和评价", category: "relationship" },
            { id: 28, text: "在群体中，我常常担心自己说错话或做错事", category: "relationship" },
            
            // 行动内耗维度（8题）
            { id: 29, text: "面对重要任务，我常常因担心'做不好'而迟迟不启动", category: "action" },
            { id: 30, text: "执行过程中，我常常频繁修改初始方案，导致进度停滞", category: "action" },
            { id: 31, text: "完成任务后，我常常过度关注细节瑕疵而忽视整体成果", category: "action" },
            { id: 32, text: "我常常因为追求完美而拖延任务的开始", category: "action" },
            { id: 33, text: "我常常在开始任务前花费过多时间做准备工作", category: "action" },
            { id: 34, text: "我常常因为担心任务结果不理想而迟迟不采取行动", category: "action" },
            { id: 35, text: "我常常在任务进行中不断怀疑自己的方法和方向", category: "action" },
            { id: 36, text: "我常常因为担心失败而避免尝试新事物", category: "action" },
            
            // 自我认知内耗维度（6题）
            { id: 37, text: "看到他人的成就，我会陷入'我为什么这么平庸'的自我否定", category: "self" },
            { id: 38, text: "设定的目标未达成时，我会全盘否定自己的能力而非调整方法", category: "self" },
            { id: 39, text: "我经常因'想成为更好的人'而同时推进多个目标，最终因精力分散而内耗", category: "self" },
            { id: 40, text: "我常常对自己的能力和价值感到怀疑", category: "self" },
            { id: 41, text: "我常常拿自己的短处与他人的长处比较", category: "self" },
            { id: 42, text: "我对自己有很高的期望，但常常因达不到而自责", category: "self" }
        ];
        
        // 答案选项 - 分数越高表示内耗越严重
        // 优化得分机制：全选非常不符合得0分，全选非常符合得100分
        const options = [
            { text: "非常不符合", value: 0 },
            { text: "不符合", value: 1 },
            { text: "一般", value: 2 },
            { text: "符合", value: 3 },
            { text: "非常符合", value: 4 }
        ];
        
        // 维度图标映射
        const dimensionIcons = {
            decision: "🤔",
            emotion: "😥",
            relationship: "👥",
            action: "⏳",
            self: "🧠"
        };
        
        // 维度名称映射
        const dimensionNames = {
            decision: "决策内耗",
            emotion: "情绪内耗",
            relationship: "关系内耗",
            action: "行动内耗",
            self: "自我认知内耗"
        };
        
        // 维度颜色映射
        const dimensionColors = {
            decision: "#9c27b0",
            emotion: "#9c27b0",
            relationship: "#9c27b0",
            action: "#9c27b0",
            self: "#9c27b0"
        };
        
        // 当前题目索引
        let currentQuestionIndex = 0;
        
        // 用户答案存储
        let userAnswers = new Array(questions.length).fill(null);
        
        // 页面元素
        const homePage = document.getElementById('home-page');
        const testPage = document.getElementById('test-page');
        const resultPage = document.getElementById('result-page');
        const startTestBtn = document.getElementById('start-test');
        const startTestBottomBtn = document.getElementById('start-test-bottom');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const questionNumber = document.getElementById('question-number');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const testProgress = document.getElementById('test-progress');
        const retakeTestBtn = document.getElementById('retake-test');
        const backHomeBtn = document.getElementById('back-home');
        
        // 开始测试函数
        function startTest() {
            // 检查是否已经验证过兑换码
            if (!checkAccess()) {
                showCodeModal();
                return;
            }
            
            homePage.classList.remove('active');
            testPage.classList.add('active');
            testPage.classList.add('page-transition');
            initTest();
        }
        
        // 初始化测试
        function initTest() {
            currentQuestionIndex = 0;
            userAnswers = new Array(questions.length).fill(null);
            displayQuestion();
            updateProgress();
        }
        
        // 显示当前题目
        function displayQuestion() {
            const question = questions[currentQuestionIndex];
            questionNumber.textContent = `题目 ${currentQuestionIndex + 1}/${questions.length}`;
            questionText.textContent = question.text;
            
            // 清空选项容器
            optionsContainer.innerHTML = '';
            
            // 添加选项
            options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                if (userAnswers[currentQuestionIndex] === option.value) {
                    optionElement.classList.add('selected');
                }
                optionElement.textContent = option.text;
                optionElement.dataset.value = option.value;
                
                optionElement.addEventListener('click', () => {
                    // 移除其他选项的选中状态
                    document.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // 设置当前选项为选中状态
                    optionElement.classList.add('selected');
                    
                    // 保存答案
                    userAnswers[currentQuestionIndex] = option.value;
                    
                    // 添加选中动画
                    optionElement.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        optionElement.style.transform = 'scale(1)';
                    }, 150);
                    
                    // 自动跳转到下一题（除了最后一题）
                    if (currentQuestionIndex < questions.length - 1) {
                        setTimeout(() => {
                            nextQuestion();
                        }, 500);
                    } else {
                        // 如果是最后一题，更新按钮状态
                        nextBtn.disabled = false;
                        nextBtn.textContent = '查看结果';
                        nextBtn.onclick = showResults;
                    }
                });
                
                optionsContainer.appendChild(optionElement);
            });
            
            // 更新按钮状态
            prevBtn.disabled = currentQuestionIndex === 0;
            
            // 如果是最后一题，更新按钮文本
            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.textContent = '查看结果';
                nextBtn.onclick = showResults;
            } else {
                nextBtn.textContent = '下一题';
                nextBtn.onclick = nextQuestion;
            }
        }
        
        // 更新进度条
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            testProgress.style.width = `${progress}%`;
        }
        
        // 下一题
        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                // 添加页面过渡效果
                const questionContainer = document.querySelector('.question-container');
                questionContainer.style.opacity = '0';
                questionContainer.style.transform = 'translateY(10px)';
                
                setTimeout(() => {
                    currentQuestionIndex++;
                    displayQuestion();
                    updateProgress();
                    
                    // 恢复页面显示
                    questionContainer.style.opacity = '1';
                    questionContainer.style.transform = 'translateY(0)';
                }, 300);
            }
        }
        
        // 上一题
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                // 添加页面过渡效果
                const questionContainer = document.querySelector('.question-container');
                questionContainer.style.opacity = '0';
                questionContainer.style.transform = 'translateY(10px)';
                
                setTimeout(() => {
                    currentQuestionIndex--;
                    displayQuestion();
                    updateProgress();
                    
                    // 恢复页面显示
                    questionContainer.style.opacity = '1';
                    questionContainer.style.transform = 'translateY(0)';
                }, 300);
            }
        }
        
        // 显示结果
        function showResults() {
            // 检查是否所有题目都已回答
            const unanswered = userAnswers.filter(answer => answer === null).length;
            if (unanswered > 0) {
                alert(`您还有 ${unanswered} 道题目未回答，请完成所有题目后再查看结果。`);
                return;
            }
            
            // 计算总分 - 优化得分机制
            const totalScore = userAnswers.reduce((sum, answer) => sum + answer, 0);
            const maxScore = questions.length * 4; // 因为每个选项的值是0-4，不是1-5
            const percentage = (totalScore / maxScore) * 100;
            
            // 计算各维度分数
            const categoryScores = {
                "decision": 0,
                "emotion": 0,
                "relationship": 0,
                "action": 0,
                "self": 0
            };
            
            const categoryCounts = {
                "decision": 0,
                "emotion": 0,
                "relationship": 0,
                "action": 0,
                "self": 0
            };
            
            // 计算每个类别的总分和题目数量
            questions.forEach((question, index) => {
                categoryScores[question.category] += userAnswers[index];
                categoryCounts[question.category]++;
            });
            
            // 计算每个类别的平均分（转换为百分比）
            const categoryPercentages = {};
            for (const category in categoryScores) {
                const maxCategoryScore = categoryCounts[category] * 4; // 因为每个选项的值是0-4
                categoryPercentages[category] = (categoryScores[category] / maxCategoryScore) * 100;
            }
            
            // 显示结果页面
            testPage.classList.remove('active');
            resultPage.classList.add('active');
            resultPage.classList.add('page-transition');
            
            // 更新结果页面内容
            document.getElementById('total-score').textContent = Math.round(percentage);
            
            // 更新圆形进度条
            const scoreCircleBg = document.getElementById('score-circle-bg');
            scoreCircleBg.style.background = `conic-gradient(var(--primary) ${percentage}%, var(--gray-light) ${percentage}% 100%)`;
            
            // 更新耐受度可视化
            updateToleranceVisualization(percentage);
            
            // 根据总分设置等级和描述
            let level, description, personalityType, emoji;
            if (percentage >= 90) {
                level = "超高内耗体质 💔";
                personalityType = "high";
                description = "您的内耗程度极高，经常陷入深度自我消耗，情绪与行动严重不一致，严重影响生活质量。您可能长期处于高压力状态，难以有效管理精力和情绪资源，建议寻求专业心理支持。";
                emoji = "💔";
            } else if (percentage >= 70) {
                level = "高内耗体质 😥";
                personalityType = "high";
                description = "您的内耗程度较高，频繁陷入多维度内耗，持续时间较长（3-7天），已影响工作效率与情绪状态。您可能需要学习更有效的应对策略来管理内耗，减少其对生活质量的影响。";
                emoji = "😥";
            } else if (percentage >= 50) {
                level = "中等内耗体质 🤔";
                personalityType = "medium";
                description = "您的内耗程度一般，在情绪、决策、关系中偶尔陷入纠结，持续时间较短（1-2天），对生活有轻微影响。您在某些领域表现出色，但在其他方面可能需要更多支持来减少内耗。";
                emoji = "🤔";
            } else if (percentage >= 30) {
                level = "低内耗体质 👍";
                personalityType = "medium";
                description = "您的内耗程度较低，仅在关键决策或重大事件中出现轻微纠结，能及时自我调节，不影响整体节奏。您具备较强的情绪管理能力，能够在大多数情况下保持心理平衡和行动效率。";
                emoji = "👍";
            } else {
                level = "超低内耗体质 🌟";
                personalityType = "low";
                description = "您的内耗程度极低，心态通透，能快速剥离无效纠结，聚焦核心目标，情绪与行动一致性高。您极少陷入无谓的自我消耗，能够高效管理精力和情绪资源，在复杂环境中保持清晰的思考和决策能力。";
                emoji = "🌟";
            }
            
            document.getElementById('score-level').innerHTML = `<i class="fas fa-medal"></i> ${level} ${emoji}`;
            document.getElementById('score-description').textContent = description;
            
            // 更新维度进度条
            updateDimensionProgress(categoryPercentages);
            
            // 更新图表
            generateRadarChart(categoryPercentages);
            
            // 更新维度分析
            updateDimensionAnalysis(categoryPercentages);
            
            // 更新人格类型匹配解析
            updatePersonalityAnalysis(percentage, categoryPercentages);
            
            // 更新内耗行为模式拆解
            updateBehaviorPattern(percentage, categoryPercentages);
            
            // 更新内耗优势挖掘
            updateStrengthAnalysis(percentage, categoryPercentages);
            
            // 更新改善方案
            updateImprovementPlan(percentage, categoryPercentages);
            
            // 更新深度分析
            updateDeepAnalysis(percentage, categoryPercentages);
        }
        
        // 更新耐受度可视化
        function updateToleranceVisualization(percentage) {
            const toleranceFill = document.getElementById('tolerance-fill');
            toleranceFill.style.width = `${percentage}%`;
            
            let description = "";
            if (percentage >= 90) {
                description = "您的内耗耐受度极低，长期被自我纠结缠绕，情绪内耗、决策内耗、关系内耗相互叠加，严重影响生活质量与心理状态。建议您寻求专业支持，系统学习内耗管理策略，重建健康的心理应对模式。";
            } else if (percentage >= 70) {
                description = "您的内耗耐受度较弱，频繁陷入多维度内耗，持续时间较长（3-7天），已影响工作效率与情绪状态。您可能需要学习更有效的应对策略来管理内耗，减少其对生活质量的影响。";
            } else if (percentage >= 50) {
                description = "您的内耗耐受度一般，在情绪、决策、关系中偶尔陷入纠结，持续时间较短（1-2天），对生活有轻微影响。您在某些领域表现出色，但在其他方面可能需要更多支持来减少内耗。";
            } else if (percentage >= 30) {
                description = "您的内耗耐受度良好，仅在关键决策或重大事件中出现轻微纠结，能及时自我调节，不影响整体节奏。您具备较强的情绪管理能力，能够在大多数情况下保持心理平衡和行动效率。";
            } else {
                description = "您的内耗耐受度极强，心态通透，能快速剥离无效纠结，聚焦核心目标，情绪与行动一致性高。您极少陷入无谓的自我消耗，能够高效管理精力和情绪资源，在复杂环境中保持清晰的思考和决策能力。";
            }
            
            document.getElementById('tolerance-description').textContent = description;
        }
        
        // 更新维度进度条
        function updateDimensionProgress(categoryPercentages) {
            const container = document.getElementById('dimension-progress-container');
            let html = '';
            
            for (const category in categoryPercentages) {
                const percentage = Math.round(categoryPercentages[category]);
                const color = dimensionColors[category];
                const name = dimensionNames[category];
                const icon = dimensionIcons[category];
                
                // 根据百分比设置描述
                let description = "";
                if (percentage >= 80) {
                    description = "严重内耗，需要重点关注";
                } else if (percentage >= 60) {
                    description = "较高内耗，需要适当调节";
                } else if (percentage >= 40) {
                    description = "中等内耗，偶尔需要关注";
                } else if (percentage >= 20) {
                    description = "较低内耗，表现良好";
                } else {
                    description = "轻微内耗，表现优秀";
                }
                
                html += `
                    <div class="dimension-progress">
                        <div class="dimension-header">
                            <div class="dimension-name">${icon} ${name}</div>
                            <div class="dimension-score">${percentage}%</div>
                        </div>
                        <div class="progress-container">
                            <div class="progress-fill" style="width: ${percentage}%;"></div>
                        </div>
                        <div class="dimension-description">${description}</div>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }
        
        // 生成雷达图
        function generateRadarChart(categoryPercentages) {
            const ctx = document.getElementById('radar-chart').getContext('2d');
            
            // 如果已有图表实例，先销毁
            if (window.radarChart) {
                window.radarChart.destroy();
            }
            
            window.radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['决策内耗', '情绪内耗', '关系内耗', '行动内耗', '自我认知内耗'],
                    datasets: [{
                        label: '您的得分',
                        data: [
                            categoryPercentages['decision'],
                            categoryPercentages['emotion'],
                            categoryPercentages['relationship'],
                            categoryPercentages['action'],
                            categoryPercentages['self']
                        ],
                        backgroundColor: 'rgba(156, 39, 176, 0.2)',
                        borderColor: 'rgba(156, 39, 176, 1)',
                        pointBackgroundColor: 'rgba(156, 39, 176, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(156, 39, 176, 1)',
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    scales: {
                        r: {
                            angleLines: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            suggestedMin: 0,
                            suggestedMax: 100,
                            ticks: {
                                stepSize: 20,
                                backdropColor: 'transparent'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            pointLabels: {
                                font: {
                                    size: 14,
                                    weight: '600'
                                },
                                color: '#9c27b0'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }
        
        // 更新维度分析
        function updateDimensionAnalysis(categoryPercentages) {
            // 找出优势维度和高风险维度
            const dimensions = [
                { name: '决策内耗', value: categoryPercentages['decision'] },
                { name: '情绪内耗', value: categoryPercentages['emotion'] },
                { name: '关系内耗', value: categoryPercentages['relationship'] },
                { name: '行动内耗', value: categoryPercentages['action'] },
                { name: '自我认知内耗', value: categoryPercentages['self'] }
            ];
            
            // 按值排序
            dimensions.sort((a, b) => b.value - a.value);
            
            const highestDimension = dimensions[0];
            const lowestDimension = dimensions[dimensions.length - 1];
            
            const analysisElement = document.getElementById('dimension-analysis');
            analysisElement.innerHTML = `
                <p><i class="fas fa-exclamation-triangle" style="color: var(--danger);"></i> <strong>最高内耗维度：${highestDimension.name}</strong> (${Math.round(highestDimension.value)}%) - 这是您内耗最严重的领域，需要特别关注</p>
                <p><i class="fas fa-star" style="color: var(--success);"></i> <strong>最低内耗维度：${lowestDimension.name}</strong> (${Math.round(lowestDimension.value)}%) - 这是您内耗最轻微的领域，表现良好</p>
            `;
        }
        
        // 更新人格类型匹配解析
        function updatePersonalityAnalysis(percentage, categoryPercentages) {
            const container = document.getElementById('personality-cards-container');
            let html = '';
            
            if (percentage >= 70) {
                html = `
                    <div class="personality-card">
                        <div class="personality-header">
                            <div class="personality-icon">
                                <i class="fas fa-hand-holding-heart"></i>
                            </div>
                            <div class="personality-name">讨好型内耗者</div>
                        </div>
                        <div class="personality-description">
                            您属于讨好型内耗者，过度在意他人评价，害怕冲突，关系内耗占比超60%。您常常因"委屈自己"而情绪反刍。
                        </div>
                        <div class="personality-cause">
                            您的讨好型内耗特质可能源于童年时期"听话=被喜欢"的经验，形成了通过取悦他人来获得安全感的模式。
                        </div>
                        <div class="personality-tips">
                            <h4><i class="fas fa-lightbulb"></i> 适配调节技巧</h4>
                            <ul>
                                <li>建立"安全决策区"，将小决定委托给信任的人或使用随机选择</li>
                                <li>创建"自我肯定清单"，每天阅读3条自己的优点或成就</li>
                                <li>练习"情绪隔离"技巧，区分他人情绪与自我感受</li>
                            </ul>
                        </div>
                    </div>
                    <div class="personality-card">
                        <div class="personality-header">
                            <div class="personality-icon">
                                <i class="fas fa-user-minus"></i>
                            </div>
                            <div class="personality-name">低自尊型内耗者</div>
                        </div>
                        <div class="personality-description">
                            您属于低自尊型内耗者，自我价值感依赖外界认可，自我认知内耗占比超60%。您常常因小事陷入"我不够好"的纠结。
                        </div>
                        <div class="personality-cause">
                            您的低自尊内耗特质可能源于成长过程中缺乏稳定的认可和肯定，形成了自我价值感的外部依赖。
                        </div>
                        <div class="personality-tips">
                            <h4><i class="fas fa-lightbulb"></i> 适配调节技巧</h4>
                            <ul>
                                <li>每天记录3件自己做得好的小事，强化自我价值感</li>
                                <li>练习对自己使用友善的语言，像对待好朋友一样对待自己</li>
                                <li>寻找支持性的人际关系，远离持续贬低您的人</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else if (percentage >= 50) {
                html = `
                    <div class="personality-card">
                        <div class="personality-header">
                            <div class="personality-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="personality-name">完美主义型内耗者</div>
                        </div>
                        <div class="personality-description">
                            您属于完美主义型内耗者，对自我与结果要求极高，因"不够好"而反复苛责。您的决策内耗和行动内耗较为突出。
                        </div>
                        <div class="personality-cause">
                            您的完美主义内耗特质可能源于童年时期"只有完美才能获得认可"的经验，形成了对自我要求过高的思维模式。
                        </div>
                        <div class="personality-tips">
                            <h4><i class="fas fa-lightbulb"></i> 适配调节技巧</h4>
                            <ul>
                                <li>每次任务前设定"最低完成标准"，先达成标准再优化</li>
                                <li>用"完成比完美更重要"作为手机壁纸，提醒自己停止苛责</li>
                                <li>每周记录1件"不完美但有价值"的事，强化正向认知</li>
                            </ul>
                        </div>
                    </div>
                    <div class="personality-card">
                        <div class="personality-header">
                            <div class="personality-icon">
                                <i class="fas fa-question-circle"></i>
                            </div>
                            <div class="personality-name">选择困难型内耗者</div>
                        </div>
                        <div class="personality-description">
                            您属于选择困难型内耗者，害怕"选错"的遗憾，决策内耗占比超70%。您可能过度收集信息，难以做出决定。
                        </div>
                        <div class="personality-cause">
                            您的选择困难内耗特质可能源于对"错误决定"的过度恐惧，形成了过度谨慎的决策模式。
                        </div>
                        <div class="personality-tips">
                            <h4><i class="fas fa-lightbulb"></i> 适配调节技巧</h4>
                            <ul>
                                <li>使用"2选1简化法"，将复杂决策简化为两个选项</li>
                                <li>设置决策时间限制，时间到后必须做出选择</li>
                                <li>实践"70分原则"，选择达到70分满意度的选项后立即执行</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else {
                html = `
                    <div class="personality-card">
                        <div class="personality-header">
                            <div class="personality-icon">
                                <i class="fas fa-balance-scale"></i>
                            </div>
                            <div class="personality-name">平衡型内耗者</div>
                        </div>
                        <div class="personality-description">
                            您属于平衡型内耗者，具备良好的心理韧性和情绪调节能力。在面对压力和挑战时，您能够保持冷静和理性，有效管理自己的情绪和精力消耗。
                        </div>
                        <div class="personality-cause">
                            您的平衡型内耗特质可能源于成长过程中形成的健康应对模式和稳定的情感支持系统。
                        </div>
                        <div class="personality-tips">
                            <h4><i class="fas fa-lightbulb"></i> 适配调节技巧</h4>
                            <ul>
                                <li>利用您的平衡能力，在团队中担任协调者角色，帮助他人减少内耗</li>
                                <li>将分析能力应用于有价值的长远规划，而非日常小决策</li>
                                <li>定期评估自己的内耗模式，防止偶尔的过度思考发展为习惯</li>
                            </ul>
                        </div>
                    </div>
                    <div class="personality-card">
                        <div class="personality-header">
                            <div class="personality-icon">
                                <i class="fas fa-seedling"></i>
                            </div>
                            <div class="personality-name">成长型内耗者</div>
                        </div>
                        <div class="personality-description">
                            您属于成长型内耗者，善于从挑战中学习并不断自我提升。您能够将内耗转化为成长的动力，通过反思和改进来优化自己的应对策略。
                        </div>
                        <div class="personality-cause">
                            您的成长型内耗特质可能源于对自我提升的持续追求和对挑战的积极态度。
                        </div>
                        <div class="personality-tips">
                            <h4><i class="fas fa-lightbulb"></i> 适配调节技巧</h4>
                            <ul>
                                <li>将反思转化为具体的行动计划，避免陷入无意义的自我批评</li>
                                <li>设定阶段性目标，将大目标分解为可执行的小步骤</li>
                                <li>定期记录成长历程，强化积极变化带来的成就感</li>
                            </ul>
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }
        
        // 更新内耗行为模式拆解
        function updateBehaviorPattern(percentage, categoryPercentages) {
            const container = document.getElementById('behavior-grid-container');
            let html = '';
            
            if (percentage >= 70) {
                html = `
                    <div class="behavior-card">
                        <div class="behavior-header">
                            <div class="behavior-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="behavior-title">日常决策模式</div>
                        </div>
                        <div class="behavior-content">
                            每天花费大量时间反复思考已做出的决定是否正确，即使是小事如午餐选择或购物决定。这种持续的自我怀疑消耗大量心理能量。
                        </div>
                        <div class="behavior-visual">
                            <div class="behavior-emoji">😣</div>
                            <div class="behavior-intensity">
                                <div class="behavior-intensity-fill" style="width: 90%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="behavior-card">
                        <div class="behavior-header">
                            <div class="behavior-icon">
                                <i class="fas fa-user-friends"></i>
                            </div>
                            <div class="behavior-title">人际互动模式</div>
                        </div>
                        <div class="behavior-content">
                            与他人交流后，长时间分析对方话语中的潜在含义，担心误解或被误解。这种过度解读可能导致社交焦虑和回避行为。
                        </div>
                        <div class="behavior-visual">
                            <div class="behavior-emoji">😰</div>
                            <div class="behavior-intensity">
                                <div class="behavior-intensity-fill" style="width: 85%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="behavior-card">
                        <div class="behavior-header">
                            <div class="behavior-icon">
                                <i class="fas fa-play-circle"></i>
                            </div>
                            <div class="behavior-title">任务启动模式</div>
                        </div>
                        <div class="behavior-content">
                            开始任何任务前，都需要确保所有条件完美才行动，导致拖延。这种完美主义倾向使您错失许多行动的最佳时机。
                        </div>
                        <div class="behavior-visual">
                            <div class="behavior-emoji">⏳</div>
                            <div class="behavior-intensity">
                                <div class="behavior-intensity-fill" style="width: 80%"></div>
                            </div>
                        </div>
                    </div>
                `;
            } else if (percentage >= 50) {
                html = `
                    <div class="behavior-card">
                        <div class="behavior-header">
                            <div class="behavior-icon">
                                <i class="fas fa-briefcase"></i>
                            </div>
                            <div class="behavior-title">职场沟通模式</div>
                        </div>
                        <div class="behavior-content">
                            职场中接到模糊需求时，反复揣摩领导意图而不敢询问。这种情况会导致任务启动延迟，影响工作效率。
                        </div>
                        <div class="behavior-visual">
                            <div class="behavior-emoji">🤔</div>
                            <div class="behavior-intensity">
                                <div class="behavior-intensity-fill" style="width: 70%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="behavior-card">
                        <div class="behavior-header">
                            <div class="behavior-icon">
                                <i class="fas fa-comments"></i>
                            </div>
                            <div class="behavior-title">社交活动模式</div>
                        </div>
                        <div class="behavior-content">
                            朋友聚会后，复盘自己说过的话是否"得体"，担心给人留下不好印象。这种反思可能持续数小时，影响休息和情绪。
                        </div>
                        <div class="behavior-visual">
                            <div class="behavior-emoji">😟</div>
                            <div class="behavior-intensity">
                                <div class="behavior-intensity-fill" style="width: 65%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="behavior-card">
                        <div class="behavior-header">
                            <div class="behavior-icon">
                                <i class="fas fa-list-ol"></i>
                            </div>
                            <div class="behavior-title">计划制定模式</div>
                        </div>
                        <div class="behavior-content">
                            制定学习计划时，因纠结"哪个方法更高效"而迟迟不开始。这种决策内耗可能导致宝贵的学习时间被浪费在计划阶段。
                        </div>
                        <div class="behavior-visual">
                            <div class="behavior-emoji">📝</div>
                            <div class="behavior-intensity">
                                <div class="behavior-intensity-fill" style="width: 60%"></div>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                html = `
                    <div class="behavior-card">
                        <div class="behavior-header">
                            <div class="behavior-icon">
                                <i class="fas fa-tasks"></i>
                            </div>
                            <div class="behavior-title">项目规划模式</div>
                        </div>
                        <div class="behavior-content">
                            面对复杂项目时，偶尔会过度思考最佳执行方案，但能及时调整。这种情况通常发生在项目启动阶段，您会花费额外时间评估各种可能性。
                        </div>
                        <div class="behavior-visual">
                            <div class="behavior-emoji">🤔</div>
                            <div class="behavior-intensity">
                                <div class="behavior-intensity-fill" style="width: 40%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="behavior-card">
                        <div class="behavior-header">
                            <div class="behavior-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="behavior-title">重要人际关系模式</div>
                        </div>
                        <div class="behavior-content">
                            在重要人际关系中，有时会担心自己的表现是否得体，但不会过度纠结。这种情况通常发生在与重要客户或上级的互动后。
                        </div>
                        <div class="behavior-visual">
                            <div class="behavior-emoji">😊</div>
                            <div class="behavior-intensity">
                                <div class="behavior-intensity-fill" style="width: 30%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="behavior-card">
                        <div class="behavior-header">
                            <div class="behavior-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="behavior-title">职业发展决策模式</div>
                        </div>
                        <div class="behavior-content">
                            面对职业发展的重要决策时，会花费较多时间评估各种可能性，但最终能够做出明确决定并付诸行动。
                        </div>
                        <div class="behavior-visual">
                            <div class="behavior-emoji">💼</div>
                            <div class="behavior-intensity">
                                <div class="behavior-intensity-fill" style="width: 25%"></div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }
        
        // 更新内耗优势挖掘 - 使用环形图
        function updateStrengthAnalysis(percentage, categoryPercentages) {
            const container = document.getElementById('strength-cards-container');
            let html = '';
            
            if (percentage >= 70) {
                html = `
                    <div class="strength-card">
                        <div class="strength-header">
                            <div class="strength-icon">
                                <i class="fas fa-hands-helping"></i>
                            </div>
                            <div class="strength-name">共情能力优势</div>
                        </div>
                        <div class="strength-description">
                            您的高度敏感性和共情能力使您能够深刻理解他人感受，这种特质在需要人际理解和情感支持的工作中非常有价值。
                        </div>
                        <div class="strength-visual">
                            <div class="strength-chart-container">
                                <canvas class="strength-chart" id="empathy-chart"></canvas>
                                <div class="strength-value">85%</div>
                            </div>
                        </div>
                        <div class="strength-careers">
                            <h4><i class="fas fa-briefcase"></i> 适配职业</h4>
                            <ul>
                                <li>心理咨询 - 能够深入理解客户的情感和需求</li>
                                <li>社会工作 - 为需要帮助的人提供情感支持</li>
                                <li>客户服务 - 理解并满足客户的深层需求</li>
                            </ul>
                        </div>
                    </div>
                    <div class="strength-card">
                        <div class="strength-header">
                            <div class="strength-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="strength-name">风险预见优势</div>
                        </div>
                        <div class="strength-description">
                            您对潜在风险的敏感性和预见能力使您能够提前识别问题，这种特质在需要风险管理和预防的工作中非常宝贵。
                        </div>
                        <div class="strength-visual">
                            <div class="strength-chart-container">
                                <canvas class="strength-chart" id="risk-chart"></canvas>
                                <div class="strength-value">80%</div>
                            </div>
                        </div>
                        <div class="strength-careers">
                            <h4><i class="fas fa-briefcase"></i> 适配职业</h4>
                            <ul>
                                <li>风险管理 - 能够识别和评估潜在风险</li>
                                <li>项目规划 - 预见项目执行中的可能问题</li>
                                <li>安全评估 - 识别环境和流程中的安全隐患</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else if (percentage >= 50) {
                html = `
                    <div class="strength-card">
                        <div class="strength-header">
                            <div class="strength-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <div class="strength-name">细节洞察优势</div>
                        </div>
                        <div class="strength-description">
                            您对细节的敏锐洞察力和深入思考能力使您能够发现他人忽略的问题，这种特质在需要精确性和深度分析的工作中非常有价值。
                        </div>
                        <div class="strength-visual">
                            <div class="strength-chart-container">
                                <canvas class="strength-chart" id="detail-chart"></canvas>
                                <div class="strength-value">75%</div>
                            </div>
                        </div>
                        <div class="strength-careers">
                            <h4><i class="fas fa-briefcase"></i> 适配职业</h4>
                            <ul>
                                <li>编辑校对 - 擅长发现细节错误和不一致</li>
                                <li>质量检测 - 能够识别产品和服务中的问题</li>
                                <li>研究分析 - 深入探索问题本质和解决方案</li>
                            </ul>
                        </div>
                    </div>
                    <div class="strength-card">
                        <div class="strength-header">
                            <div class="strength-icon">
                                <i class="fas fa-lightbulb"></i>
                            </div>
                            <div class="strength-name">创新思维优势</div>
                        </div>
                        <div class="strength-description">
                            您的多角度思考能力使您能够看到问题的不同层面，这种思维方式在需要创新和突破传统思维的工作中非常宝贵。
                        </div>
                        <div class="strength-visual">
                            <div class="strength-chart-container">
                                <canvas class="strength-chart" id="innovation-chart"></canvas>
                                <div class="strength-value">70%</div>
                            </div>
                        </div>
                        <div class="strength-careers">
                            <h4><i class="fas fa-briefcase"></i> 适配职业</h4>
                            <ul>
                                <li>创意设计 - 能够从不同角度构思解决方案</li>
                                <li>产品开发 - 理解用户需求并提出创新方案</li>
                                <li>内容创作 - 从独特视角创作有深度的内容</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else {
                html = `
                    <div class="strength-card">
                        <div class="strength-header">
                            <div class="strength-icon">
                                <i class="fas fa-balance-scale"></i>
                            </div>
                            <div class="strength-name">决策优势</div>
                        </div>
                        <div class="strength-description">
                            您具备优秀的决策能力和理性思考能力，能够在复杂情况下保持清晰的判断，这种能力在高压力环境中尤为宝贵。
                        </div>
                        <div class="strength-visual">
                            <div class="strength-chart-container">
                                <canvas class="strength-chart" id="decision-chart"></canvas>
                                <div class="strength-value">85%</div>
                            </div>
                        </div>
                        <div class="strength-careers">
                            <h4><i class="fas fa-briefcase"></i> 适配职业</h4>
                            <ul>
                                <li>项目管理 - 能够统筹全局，做出合理决策</li>
                                <li>咨询顾问 - 擅长分析问题，提供专业建议</li>
                                <li>危机管理 - 在压力下保持冷静，有效应对</li>
                            </ul>
                        </div>
                    </div>
                    <div class="strength-card">
                        <div class="strength-header">
                            <div class="strength-icon">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="strength-name">情绪稳定优势</div>
                        </div>
                        <div class="strength-description">
                            您的情绪稳定性使您能够在压力环境中保持高效，这种特质在需要长期专注和抗压能力的工作中极具价值。
                        </div>
                        <div class="strength-visual">
                            <div class="strength-chart-container">
                                <canvas class="strength-chart" id="emotion-chart"></canvas>
                                <div class="strength-value">90%</div>
                            </div>
                        </div>
                        <div class="strength-careers">
                            <h4><i class="fas fa-briefcase"></i> 适配职业</h4>
                            <ul>
                                <li>医疗急救 - 在紧急情况下保持冷静判断</li>
                                <li>金融交易 - 面对市场波动保持理性决策</li>
                                <li>教育指导 - 稳定情绪影响和引导学生</li>
                            </ul>
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = html;
            
            // 创建环形图
            setTimeout(() => {
                createStrengthCharts(percentage);
            }, 100);
        }
        
        // 创建优势挖掘环形图
        function createStrengthCharts(percentage) {
            const chartConfigs = [
                { id: 'empathy-chart', value: 85, color: '#9c27b0' },
                { id: 'risk-chart', value: 80, color: '#9c27b0' },
                { id: 'detail-chart', value: 75, color: '#9c27b0' },
                { id: 'innovation-chart', value: 70, color: '#9c27b0' },
                { id: 'decision-chart', value: 85, color: '#9c27b0' },
                { id: 'emotion-chart', value: 90, color: '#9c27b0' }
            ];
            
            chartConfigs.forEach(config => {
                const canvas = document.getElementById(config.id);
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                const value = config.value;
                
                // 创建环形图
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        datasets: [{
                            data: [value, 100 - value],
                            backgroundColor: [
                                config.color,
                                '#e9ecef'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        cutout: '70%',
                        responsive: true,
                        maintainAspectRatio: true,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                enabled: false
                            }
                        },
                        animation: {
                            animateScale: true,
                            animateRotate: true
                        }
                    }
                });
            });
        }
        
        // 更新改善方案
        function updateImprovementPlan(percentage, categoryPercentages) {
            const container = document.getElementById('improvement-cards-container');
            let html = '';
            
            if (percentage >= 70) {
                html = `
                    <div class="improvement-card">
                        <div class="improvement-header">
                            <div class="improvement-icon">
                                <i class="fas fa-first-aid"></i>
                            </div>
                            <div class="improvement-title">紧急止损方案</div>
                        </div>
                        <ul class="improvement-tips">
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">设置"内耗警报"：当意识到自己在反复思考同一问题时，立即转移注意力</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">实践"5秒法则"：想到要做的事，数5秒后立即行动，不给自己犹豫时间</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">创建"停止内耗"提示卡放在显眼位置，提醒自己及时中断内耗循环</div>
                            </li>
                        </ul>
                    </div>
                    <div class="improvement-card">
                        <div class="improvement-header">
                            <div class="improvement-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="improvement-title">长期调节方案</div>
                        </div>
                        <ul class="improvement-tips">
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text"><strong>第1-2周：</strong>建立日常结构，固定作息和任务时间，减少决策点</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text"><strong>第3周：</strong>挑战负面自动思维，用证据检验担忧的真实性</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text"><strong>第4周：</strong>逐步增加行动量，从最小任务开始，积累成功经验</div>
                            </li>
                        </ul>
                    </div>
                    <div class="improvement-card">
                        <div class="improvement-header">
                            <div class="improvement-icon">
                                <i class="fas fa-user-cog"></i>
                            </div>
                            <div class="improvement-title">实用小技巧</div>
                        </div>
                        <ul class="improvement-tips">
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">"安全决策区"：将小决定委托给信任的人或使用随机选择</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">"自我肯定清单"：每天阅读3条自己的优点或成就</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">"情绪隔离"技巧：区分他人情绪与自我感受</div>
                            </li>
                        </ul>
                    </div>
                `;
            } else if (percentage >= 50) {
                html = `
                    <div class="improvement-card">
                        <div class="improvement-header">
                            <div class="improvement-icon">
                                <i class="fas fa-first-aid"></i>
                            </div>
                            <div class="improvement-title">紧急止损方案</div>
                        </div>
                        <ul class="improvement-tips">
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">下次遇到他人请求时，先延迟20分钟回应，避免冲动答应</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">每天睡前记录1件"没有委屈自己"的小事，强化边界感</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">遇到纠结的人际问题时，用"我需要XX"代替"我是不是不该XX"的句式沟通</div>
                            </li>
                        </ul>
                    </div>
                    <div class="improvement-card">
                        <div class="improvement-header">
                            <div class="improvement-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="improvement-title">长期调节方案</div>
                        </div>
                        <ul class="improvement-tips">
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text"><strong>第1周：</strong>使用"2选1简化法"，将复杂决策简化为两个选项</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text"><strong>第2周：</strong>创建情绪日记，记录内耗触发点和应对效果</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text"><strong>第3-4周：</strong>练习说"不"，每周至少拒绝一个非必要的请求</div>
                            </li>
                        </ul>
                    </div>
                    <div class="improvement-card">
                        <div class="improvement-header">
                            <div class="improvement-icon">
                                <i class="fas fa-user-cog"></i>
                            </div>
                            <div class="improvement-title">实用小技巧</div>
                        </div>
                        <ul class="improvement-tips">
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">"完成比完美更重要"作为手机壁纸，提醒自己停止苛责</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">"5秒法则"：想到要做的事，数5秒后立即行动</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">"情绪容器"：将担忧写在纸上，放入盒子暂时封存</div>
                            </li>
                        </ul>
                    </div>
                `;
            } else {
                html = `
                    <div class="improvement-card">
                        <div class="improvement-header">
                            <div class="improvement-icon">
                                <i class="fas fa-first-aid"></i>
                            </div>
                            <div class="improvement-title">紧急止损方案</div>
                        </div>
                        <ul class="improvement-tips">
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">当感到过度思考时，设置10分钟计时器，时间到后立即做出决定</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">每天结束时，快速记录3件顺利完成的事情，强化成就感</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">遇到不确定的情况，先采取最小可行行动，而非等待完美方案</div>
                            </li>
                        </ul>
                    </div>
                    <div class="improvement-card">
                        <div class="improvement-header">
                            <div class="improvement-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="improvement-title">长期调节方案</div>
                        </div>
                        <ul class="improvement-tips">
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text"><strong>第1周：</strong>练习"70分原则"，选择达到70分满意度的选项后立即执行</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text"><strong>第2周：</strong>每天进行10分钟正念冥想，观察情绪而不评判</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text"><strong>第3-4周：</strong>练习清晰表达需求，每天至少一次明确说出自己的期望</div>
                            </li>
                        </ul>
                    </div>
                    <div class="improvement-card">
                        <div class="improvement-header">
                            <div class="improvement-icon">
                                <i class="fas fa-user-cog"></i>
                            </div>
                            <div class="improvement-title">实用小技巧</div>
                        </div>
                        <ul class="improvement-tips">
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">"5分钟启动法"：任何任务先做5分钟，再决定是否继续</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">"情绪隔离"技巧：区分他人情绪与自我感受</div>
                            </li>
                            <li class="improvement-tip">
                                <div class="tip-icon"><i class="fas fa-check-circle"></i></div>
                                <div class="tip-text">"拒绝话术库"：准备3-5种得体的拒绝方式</div>
                            </li>
                        </ul>
                    </div>
                `;
            }
            
            container.innerHTML = html;
        }
        
        // 更新深度分析
        function updateDeepAnalysis(percentage, categoryPercentages) {
            // 原生家庭分析
            let familyAnalysis, familySuggestion;
            if (percentage >= 70) {
                familyAnalysis = "您的原生家庭可能在情感支持或应对机制方面存在明显不足。您在自我认知内耗中表现出的'低自我价值感'，可能与原生家庭中缺乏稳定认可和肯定的成长环境相关。这可能导致您在面对压力时缺乏有效的内部资源，容易陷入内耗循环。您可能在成长过程中经历了情感忽视、过度批评或不稳定的家庭环境，这些经历影响了您发展健康的应对策略。您可能难以信任他人或表达自己的需求，这进一步加剧了内耗。";
                familySuggestion = "考虑寻求专业心理咨询，帮助您处理原生家庭带来的影响，并建立更健康的应对模式。通过治疗，您可以探索这些早期经历如何影响您当前的生活，并学习新的技能来改善您的关系和心理健康。具体建议：尝试'重新养育自己'的练习，用您希望得到的关爱方式对待自己。同时，尝试建立支持性的人际关系，这可以帮助您体验不同的互动模式。";
            } else if (percentage >= 50) {
                familyAnalysis = "您的原生家庭可能在情感表达或应对压力方面存在一些不完善的模式。您在关系内耗中表现出的'过度妥协'，可能与原生家庭中'听话才能获得关注'的教养模式相关。您可能在某些情况下重复了家庭的应对方式，导致内耗增加。这可能表现为过度承担责任、难以表达情感或回避冲突等模式。您的家庭可能在某些方面提供了支持，但在其他方面存在不足，这使您在某些情境下感到困惑或无力。";
                familySuggestion = "尝试识别并调整从原生家庭习得的不健康应对模式。您可以考虑通过心理咨询或自我反思来探索这些模式的形成和影响。学习更有效的情绪管理和压力应对策略，并尝试在安全的关系中练习新的行为模式。具体建议：每天花5分钟记录您注意到的不健康模式，并思考替代的应对方式。记住，改变需要时间和耐心，对自己保持宽容和理解。";
            } else {
                familyAnalysis = "您的原生家庭可能为您提供了稳定的情感支持和健康的应对模式。您可能在一个相对开放、包容的环境中成长，家庭成员之间能够有效沟通并相互支持。这种环境使您能够发展出良好的情绪调节能力和应对压力的策略，形成了较为健康的内耗应对模式。您可能从父母或主要照顾者那里学到了如何有效管理情绪和处理冲突，这为您成年后的心理健康奠定了坚实基础。";
                familySuggestion = "继续保持与家人的健康沟通，尝试将这种积极的家庭模式应用到您当前的人际关系中。您可以考虑与家人分享您的积极体验，并尝试帮助其他家庭成员发展类似的健康模式。如果您成为父母，可以尝试将这些积极的育儿方式传递给下一代。";
            }
            
            document.getElementById('family-analysis').textContent = familyAnalysis;
            document.getElementById('family-suggestion').textContent = familySuggestion;
            
            // 职业适配度分析
            let careerAnalysis, careerWarning;
            if (percentage >= 70) {
                careerAnalysis = "您的内耗模式使您更适合相对稳定、压力较小的工作环境。您可能在创意性、自主性强的工作中表现更好。适合职业包括艺术、写作、研究、设计、图书馆管理、园艺等允许您按照自己的节奏工作并发挥创造力的领域。重要的是找到与您的价值观和能量水平相匹配的工作。";
                careerWarning = "严格避免高压销售、紧急救援、高频交易等需要快速决策和应对压力的职业。优先考虑远程工作或弹性工作制，减少通勤和办公室政治带来的额外压力。寻找支持员工心理健康的组织，并学习有效的压力管理技巧。";
            } else if (percentage >= 50) {
                careerAnalysis = "您的中等内耗耐受度使您适合有一定压力但不过度紧张的工作环境。您可能在结构清晰、支持性强的团队中表现最佳。适合职业包括教育、医疗、技术研发、编辑、设计等需要专注和细致的工作。您在有明确期望和适度挑战的环境中能够发挥最佳水平，但可能需要避免极端高压的情境。";
                careerWarning = "需避免进入权责模糊、需要频繁妥协的团队环境。谨慎选择需要快速决策和高压应对的职位，优先考虑文化健康、支持员工心理健康的组织。考虑与上司或同事沟通您的工作需求和界限，确保您的工作环境能够支持您的心理健康。";
            } else {
                careerAnalysis = "您的高内耗耐受度使您适合高压、快节奏的工作环境。您可能在高要求的工作中表现出色，能够有效管理工作压力并保持高效率。适合职业包括项目管理、咨询、创业、医疗急救、金融交易等需要快速决策和应对复杂情境的领域。您的情绪稳定性和应对能力使您能够在复杂情境中保持清晰思考，这在高压力职业中是非常宝贵的特质。";
                careerWarning = "避免长期处于极端高压环境，即使耐受度高也需要定期休息和恢复。注意不要过度承担责任，保持工作与生活的平衡。定期进行职业评估，确保您的工作环境与您的价值观和长期目标保持一致。";
            }
            
            document.getElementById('career-analysis').textContent = careerAnalysis;
            document.getElementById('career-warning').textContent = careerWarning;
            
            // 亲密关系分析
            let relationshipAnalysis, relationshipCommunication;
            if (percentage >= 70) {
                relationshipAnalysis = "您的内耗模式可能使您在亲密关系中更容易感到压力和焦虑。您可能在关系中过度敏感或回避冲突，导致关系质量下降。您可能难以信任伴侣或表达脆弱，这限制了关系的深度和亲密感。您可能渴望连接，但害怕受伤，这使您在关系中保持警惕和防御。";
                relationshipCommunication = "考虑寻求关系咨询，学习更健康的沟通和应对模式。从小步骤开始练习在关系中表达您的需求和感受，逐渐建立信任和安全感。使用'当我...时，我感到...'句式分享感受，帮助伴侣理解您的内心体验。具体技巧：每天与伴侣分享一件让您感到感激的小事，培养关系的积极氛围。优先选择支持性、理解性强的伴侣，记住，建立健康的关系是一个过程，需要时间和耐心。";
            } else if (percentage >= 50) {
                relationshipAnalysis = "您在亲密关系中可能有时感到压力。您可能在关系紧张时容易感到疲惫或情绪波动。您可能在某些情况下过度妥协或回避冲突，这可能导致关系中的不平衡。您可能渴望亲密连接，但有时难以表达自己的需求或处理关系中的挑战。";
                relationshipCommunication = "学习在关系中表达自己的需求和界限，同时培养更有效的冲突解决技巧。考虑与伴侣一起参加关系工作坊或阅读相关书籍，提升你们的关系技能。使用'我需要...'句式明确表达期望，避免让对方猜测。具体技巧：当感到不安时，先深呼吸5次，再表达您的感受。记住，健康的冲突是关系成长的机会，而不是威胁。";
            } else {
                relationshipAnalysis = "您在亲密关系中可能更加稳定和包容。您能够有效处理关系中的冲突和压力，维持健康的亲密关系。您的情绪稳定性和沟通能力使您能够建立深度、有意义的关系，并在困难时期保持关系的稳定性。您可能能够为伴侣提供情感支持，同时在关系中保持适当的个人界限。";
                relationshipCommunication = "继续保持开放和诚实的沟通，同时注意不要过度承担关系中的责任，保持适当的个人边界。考虑与伴侣定期进行关系评估，确保双方的需求都得到满足。使用'我感觉...'句式表达感受，而非指责对方。记住，健康的关系需要双方的投入和努力，而不仅仅是单方面的付出。";
            }
            
            document.getElementById('relationship-analysis').textContent = relationshipAnalysis;
            document.getElementById('relationship-communication').textContent = relationshipCommunication;
            
            // 标签切换功能
            const tabs = document.querySelectorAll('.analysis-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // 移除所有active类
                    tabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.analysis-content').forEach(c => c.classList.remove('active'));
                    
                    // 添加active类到当前标签和对应内容
                    tab.classList.add('active');
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(`${tabId}-content`).classList.add('active');
                });
            });
        }
        
        // 事件监听
        startTestBtn.addEventListener('click', startTest);
        startTestBottomBtn.addEventListener('click', startTest);
        
        prevBtn.addEventListener('click', prevQuestion);
        nextBtn.addEventListener('click', nextQuestion);
        
        retakeTestBtn.addEventListener('click', () => {
            resultPage.classList.remove('active');
            testPage.classList.add('active');
            testPage.classList.add('page-transition');
            initTest();
        });
        
        backHomeBtn.addEventListener('click', () => {
            resultPage.classList.remove('active');
            homePage.classList.add('active');
            homePage.classList.add('page-transition');
        });
        
        // 兑换码弹窗事件监听
        document.getElementById('modal-close').addEventListener('click', () => {
            document.getElementById('code-modal').classList.remove('active');
        });
        
        document.getElementById('cancel-btn').addEventListener('click', () => {
            document.getElementById('code-modal').classList.remove('active');
        });
        
        document.getElementById('confirm-btn').addEventListener('click', () => {
            const codeInput = document.getElementById('code-input').value;
            validateCode(codeInput);
        });
        
        // 按回车键确认兑换码
        document.getElementById('code-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const codeInput = document.getElementById('code-input').value;
                validateCode(codeInput);
            }
        });
        
        // 初始化显示首页
        initTest();
    </script>
</body>
</html>